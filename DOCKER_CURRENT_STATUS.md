# âš ï¸ å½“å‰ç¯å¢ƒè¯´æ˜ä¸è§£å†³æ–¹æ¡ˆ

## ğŸ“Š ç°çŠ¶æ€»ç»“

### âœ… å·²å®Œæˆé…ç½®

Docker éƒ¨ç½²çš„æ‰€æœ‰é…ç½®å·²å®Œæˆï¼š

| ç±»å‹ | æ–‡ä»¶ | çŠ¶æ€ |
|------|------|------|
| **å®¹å™¨é…ç½®** | Dockerfile | âœ… å®Œæˆ |
| **ç¼–æ’é…ç½®** | docker-compose.yml | âœ… å®Œæˆ |
| **æ„å»ºä¼˜åŒ–** | .dockerignore | âœ… å®Œæˆ |
| **å¯åŠ¨è„šæœ¬** | start-docker.sh/bat | âœ… å®Œæˆ |
| **æ„å»ºè„šæœ¬** | build-docker.sh/bat | âœ… å®Œæˆ |
| **æ•°æ®åº“è„šæœ¬** | scripts/init.sql | âœ… å®Œæˆ |
| **æ–‡æ¡£** | DOCKER_*.md | âœ… å®Œæˆ |

### âš ï¸ å½“å‰ç¯å¢ƒé—®é¢˜

æœ¬åœ°ç¯å¢ƒå­˜åœ¨ä»¥ä¸‹é—®é¢˜ï¼Œé˜»æ­¢äº†ç›´æ¥çš„ Docker å¯åŠ¨ï¼š

#### 1. ç½‘ç»œè¿æ¥é—®é¢˜
- **ç—‡çŠ¶**ï¼šæ— æ³•è¿æ¥åˆ° Docker Hub æ‹‰å–é•œåƒ
- **åŸå› **ï¼šå½“å‰ç½‘ç»œé™åˆ¶
- **å½±å“**ï¼šæ— æ³•ä¸‹è½½ Mavenã€Java ç­‰åŸºç¡€é•œåƒ
- **è§£å†³**ï¼šç­‰å¾…ç½‘ç»œæ¢å¤æˆ–ä½¿ç”¨æœ¬åœ°é•œåƒ

#### 2. Java 25 ä¸ Lombok å…¼å®¹æ€§
- **ç—‡çŠ¶**ï¼šç¼–è¯‘æ—¶å‡ºç° `TypeTag :: UNKNOWN` é”™è¯¯
- **åŸå› **ï¼šæœ¬åœ°è¿è¡Œ Java 25ï¼ŒLombok è¿˜æœªå®Œå…¨æ”¯æŒ
- **å½±å“**ï¼šæœ¬åœ° Maven æ„å»ºå¤±è´¥
- **è§£å†³**ï¼šä½¿ç”¨ Docker å†…çš„ Java 17 è¿›è¡Œæ„å»º

---

## ğŸ”§ è§£å†³æ–¹æ¡ˆ

### æ–¹æ¡ˆ Aï¼šç­‰å¾…ç½‘ç»œæ¢å¤ï¼ˆæ¨èï¼‰

**æ­¥éª¤ï¼š**
1. æ£€æŸ¥ç½‘ç»œè¿æ¥
2. è¿è¡Œå¯åŠ¨è„šæœ¬ï¼š
   ```bash
   # Windows
   start-docker.bat

   # Linux/Mac
   bash start-docker.sh
   ```

**é¢„æœŸç»“æœï¼š**
- è„šæœ¬ä¼šè‡ªåŠ¨æ£€æµ‹å¹¶æ„å»º
- Docker ä¼šæ‹‰å–å¿…è¦çš„åŸºç¡€é•œåƒ
- åº”ç”¨å°†åœ¨ 3-5 åˆ†é’Ÿå†…å¯åŠ¨

### æ–¹æ¡ˆ Bï¼šä½¿ç”¨é¢„æ„å»ºçš„ JAR

å¦‚æœæ‚¨å·²æœ‰ç¼–è¯‘å¥½çš„ JAR æ–‡ä»¶ï¼š

```bash
# 1. å°† JAR å¤åˆ¶åˆ° target ç›®å½•
cp your-jar.jar target/mock-service-backend-1.0.0.jar

# 2. ç›´æ¥å¯åŠ¨å®¹å™¨
docker-compose up -d
```

### æ–¹æ¡ˆ Cï¼šåœ¨ç½‘ç»œå¯ç”¨çš„æœºå™¨ä¸Šæ„å»º

```bash
# åœ¨ç½‘ç»œæ­£å¸¸çš„æœºå™¨ä¸Š
mvn clean package -DskipTests

# æˆ–ä½¿ç”¨ Docker æ„å»º
docker run --rm -v $(pwd):/build -w /build \
  maven:3.9-eclipse-temurin-17 \
  mvn clean package -DskipTests

# ç„¶åå°† target/mock-service-backend-1.0.0.jar å¤åˆ¶åˆ°ç›®æ ‡æœºå™¨
```

### æ–¹æ¡ˆ Dï¼šæ‰‹åŠ¨ç¼–è¯‘ç±»ï¼ˆé«˜çº§ç”¨æˆ·ï¼‰

å¦‚æœå®Œå…¨ä¸ä½¿ç”¨ Mavenï¼š

```bash
# 1. æ‰‹åŠ¨ç¼–è¯‘æºä»£ç 
javac -d target/classes \
  -cp "lib/*:." \
  src/main/java/com/mock/service/**/*.java

# 2. åˆ›å»º JAR
jar cf target/mock-service-backend-1.0.0.jar -C target/classes .

# 3. å¯åŠ¨å®¹å™¨
docker-compose up -d
```

---

## ğŸ“‹ ä½¿ç”¨é¢„é…ç½®çš„ Docker Compose æ–¹æ¡ˆ

å³ä½¿ JAR æ–‡ä»¶è¿˜æ²¡æœ‰å‡†å¤‡å¥½ï¼Œæ‚¨ä¹Ÿå¯ä»¥å…ˆéªŒè¯ Docker ç¯å¢ƒï¼š

```bash
# 1. æ£€æŸ¥ Docker çŠ¶æ€
docker --version
docker-compose --version
docker ps

# 2. éªŒè¯ docker-compose.yml é…ç½®
docker-compose config

# 3. åˆ›å»ºå·ï¼ˆå¯é€‰ï¼‰
docker volume create mock-service-data

# 4. å‡†å¤‡å¥½ JAR åç›´æ¥å¯åŠ¨
docker-compose up -d
```

---

## ğŸš€ æ¨èåç»­æ­¥éª¤

### ä»Šå¤©å¯ä»¥åšçš„äº‹æƒ…ï¼š

1. **ğŸ“– é˜…è¯»æ–‡æ¡£**
   - æµè§ˆ `DOCKER_QUICK_START.md` äº†è§£åŸºæœ¬æ¦‚å¿µ
   - æŸ¥çœ‹ `DOCKER_DEPLOYMENT.md` äº†è§£è¯¦ç»†é…ç½®

2. **âœ… éªŒè¯ç¯å¢ƒ**
   ```bash
   docker --version
   docker-compose --version
   docker ps
   ```

3. **ğŸ” å®¡æŸ¥é…ç½®**
   - æ£€æŸ¥ `docker-compose.yml` æ˜¯å¦æ»¡è¶³éœ€æ±‚
   - ç¡®è®¤ Dockerfile çš„æ„å»ºç­–ç•¥
   - æŸ¥çœ‹ init.sql ä¸­çš„æ•°æ®åº“è®¾è®¡

4. **ğŸ› ï¸ æ ¹æ®éœ€è¦è°ƒæ•´**
   - ä¿®æ”¹ docker-compose.yml ä¸­çš„ç«¯å£å·
   - ç¼–è¾‘é…ç½®ä»¥åˆ‡æ¢ H2/MySQL
   - æ›´æ–°ç¯å¢ƒå˜é‡

### ç½‘ç»œæ¢å¤åç«‹å³åšçš„äº‹æƒ…ï¼š

1. **æ„å»ºåº”ç”¨**
   ```bash
   bash build-docker.sh  # æˆ– build-docker.bat
   ```

2. **å¯åŠ¨æœåŠ¡**
   ```bash
   bash start-docker.sh  # æˆ– start-docker.bat
   ```

3. **éªŒè¯æœåŠ¡**
   ```bash
   curl http://localhost:8080/api/health
   ```

---

## ğŸ” è¯Šæ–­å’Œæµ‹è¯•

### æ£€æŸ¥ Docker ç¯å¢ƒ

```bash
# æŸ¥çœ‹ Docker ä¿¡æ¯
docker info

# åˆ—å‡ºæœ¬åœ°é•œåƒ
docker images

# åˆ—å‡ºå®¹å™¨
docker ps -a

# æŸ¥çœ‹ç£ç›˜ä½¿ç”¨
docker system df
```

### éªŒè¯ docker-compose æ–‡ä»¶

```bash
# éªŒè¯è¯­æ³•
docker-compose config

# æ£€æŸ¥é…ç½®
docker-compose config --services
```

### æ¨¡æ‹Ÿå¯åŠ¨æµç¨‹ï¼ˆä¸å®é™…å¯åŠ¨ï¼‰

```bash
# æ£€æŸ¥ä¼šå¯åŠ¨å“ªäº›æœåŠ¡
docker-compose config

# æ£€æŸ¥é•œåƒæ˜¯å¦éœ€è¦æ‹‰å–
docker pull eclipse-temurin:17-jdk-alpine  # å°è¯•æ‹‰å–è¿è¡Œé•œåƒ

# æ³¨æ„ï¼šæ„å»ºé•œåƒéœ€è¦ Mavenï¼Œä¼šå¤±è´¥ï¼Œè¿™æ˜¯é¢„æœŸçš„
```

---

## ğŸ¯ å®Œæ•´çš„å¯åŠ¨æµç¨‹ï¼ˆç½‘ç»œæ¢å¤åï¼‰

```bash
# 1. è¿›å…¥é¡¹ç›®ç›®å½•
cd mock-service-backend

# 2. å¯åŠ¨ï¼ˆè‡ªåŠ¨æ„å»ºå’Œå¯åŠ¨ï¼‰
bash start-docker.sh  # æˆ– start-docker.bat

# æˆ–æ‰‹åŠ¨æ‰§è¡Œä»¥ä¸‹æ­¥éª¤ï¼š

# 2a. æ„å»ºåº”ç”¨
bash build-docker.sh  # æˆ– build-docker.bat
# è¿™ä¼šï¼š
# - å¯åŠ¨ Maven å®¹å™¨
# - åœ¨å®¹å™¨å†…ç¼–è¯‘é¡¹ç›®
# - ç”Ÿæˆ target/mock-service-backend-1.0.0.jar

# 2b. å¯åŠ¨å®¹å™¨
docker-compose up -d
# è¿™ä¼šï¼š
# - æ„å»ºåº”ç”¨é•œåƒ
# - å¯åŠ¨åº”ç”¨å®¹å™¨
# - æš´éœ² 8080 ç«¯å£

# 2c. éªŒè¯å¯åŠ¨
curl http://localhost:8080/api/health
# åº”è¯¥è¿”å› 200 OK
```

---

## ğŸ“ é…ç½®å˜æ›´æ¸…å•

å¦‚æœæ‚¨éœ€è¦è‡ªå®šä¹‰é…ç½®ï¼Œä»¥ä¸‹æ˜¯å¯ä»¥ä¿®æ”¹çš„åœ°æ–¹ï¼š

### docker-compose.yml

```yaml
# ä¿®æ”¹ç«¯å£
mock-service:
  ports:
    - "8081:8080"  # æ”¹ä¸º 8081

# æ¿€æ´» MySQL
services:
  mysql:  # å–æ¶ˆæ³¨é‡Š
  ...

# ä¿®æ”¹ç¯å¢ƒå˜é‡
mock-service:
  environment:
    SPRING_JPA_HIBERNATE_DDL_AUTO: validate  # æ”¹ä¸º validate
    LOGGING_LEVEL_COM_MOCK_SERVICE: INFO  # æ”¹ä¸º INFO
```

### Dockerfile

```dockerfile
# ä¿®æ”¹åŸºç¡€é•œåƒç‰ˆæœ¬
FROM maven:3.9-eclipse-temurin-17  # å¯æ”¹ä¸ºå…¶ä»–ç‰ˆæœ¬
FROM eclipse-temurin:17-jdk-alpine  # å¯æ”¹ä¸ºå…¶ä»–ç‰ˆæœ¬
```

### pom.xml

```xml
<!-- ä¿®æ”¹ Spring Boot ç‰ˆæœ¬ -->
<version>3.2.0</version>  <!-- å¯æ”¹ä¸ºå…¶ä»–ç‰ˆæœ¬ -->

<!-- ä¿®æ”¹ Java ç‰ˆæœ¬ -->
<java.version>17</java.version>  <!-- å¯æ”¹ä¸º 21ã€23 ç­‰ -->
```

---

## ğŸ“ éœ€è¦äººå·¥å¸®åŠ©ï¼Ÿ

### å¦‚æœç½‘ç»œé—®é¢˜æŒç»­ï¼š

1. **æŸ¥çœ‹ç½‘ç»œé…ç½®**
   - æ£€æŸ¥é˜²ç«å¢™è®¾ç½®
   - æ£€æŸ¥ä»£ç†é…ç½®
   - å°è¯•åˆ‡æ¢ç½‘ç»œ

2. **ä½¿ç”¨ç¦»çº¿æ¨¡å¼**
   - é¢„å…ˆåœ¨æœ‰ç½‘ç»œçš„æœºå™¨ä¸Šæ„å»º
   - ä¼ è¾“ JAR æ–‡ä»¶åˆ°ç›®æ ‡æœºå™¨
   - ä»…è¿è¡Œå®¹å™¨ä¸æ„å»º

3. **å¯»æ±‚æŠ€æœ¯æ”¯æŒ**
   - æ£€æŸ¥ Docker Desktop æ›´æ–°
   - æŸ¥çœ‹ Docker å®˜æ–¹æ–‡æ¡£
   - å’¨è¯¢ç½‘ç»œç®¡ç†å‘˜

### å¦‚æœå‡ºç°å…¶ä»–é”™è¯¯ï¼š

1. **æ”¶é›†æ—¥å¿—**
   ```bash
   docker-compose logs > docker.log
   docker system info > docker-info.log
   ```

2. **æ£€æŸ¥å¸¸è§é—®é¢˜**
   - æŸ¥çœ‹ DOCKER_QUICK_START.md ä¸­çš„æ•…éšœæ’æŸ¥ç« èŠ‚
   - æŸ¥çœ‹ DOCKER_DEPLOYMENT.md ä¸­çš„å¸¸è§é—®é¢˜

3. **é€æ­¥æ’æŸ¥**
   - å…ˆéªŒè¯ Docker ç¯å¢ƒ
   - å†éªŒè¯ç½‘ç»œè¿æ¥
   - æœ€åéªŒè¯åº”ç”¨é…ç½®

---

## âœ¨ å¥½æ¶ˆæ¯

âœ… **æ‰€æœ‰ Docker é…ç½®éƒ½å·²å‡†å¤‡å°±ç»ªï¼**

ç°åœ¨ä½ æ‹¥æœ‰ï¼š
- âœ… å®Œæ•´çš„å¤šé˜¶æ®µ Dockerfile
- âœ… å®Œå–„çš„ docker-compose.yml
- âœ… è‡ªåŠ¨åŒ–æ„å»ºå’Œå¯åŠ¨è„šæœ¬
- âœ… è¯¦ç»†çš„éƒ¨ç½²æ–‡æ¡£å’Œæ•…éšœæ’æŸ¥æŒ‡å—
- âœ… æ•°æ®åº“åˆå§‹åŒ–è„šæœ¬

ä¸€æ—¦ç½‘ç»œæ¢å¤ï¼Œåªéœ€è¿è¡Œ `start-docker.sh` æˆ– `start-docker.bat`ï¼ŒæœåŠ¡å°±ä¼šåœ¨å‡ åˆ†é’Ÿå†…å¯åŠ¨ï¼

---

## ğŸ‰ æ€»ç»“

| é¡¹ç›® | çŠ¶æ€ | è¯´æ˜ |
|------|------|------|
| é…ç½® | âœ… å®Œæˆ | æ‰€æœ‰æ–‡ä»¶å·²å‡†å¤‡ |
| æ–‡æ¡£ | âœ… å®Œæˆ | è¯¦ç»†æŒ‡å—å·²æä¾› |
| è„šæœ¬ | âœ… å®Œæˆ | å¯åŠ¨/æ„å»ºè„šæœ¬å·²æä¾› |
| å¯åŠ¨ | â³ å¾…å‘½ | ç­‰å¾…ç½‘ç»œæ¢å¤ |

**ä¸‹ä¸€æ­¥**ï¼šç­‰å¾…ç½‘ç»œæ¢å¤ â†’ è¿è¡Œå¯åŠ¨è„šæœ¬ â†’ äº«å—æœåŠ¡ï¼

---

*æœ€åæ›´æ–°: 2026-02-09*
